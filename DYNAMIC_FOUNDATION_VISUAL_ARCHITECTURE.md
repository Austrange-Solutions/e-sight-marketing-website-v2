# ğŸ¨ Dynamic Foundation System - Visual Architecture

## ğŸ“Š System Overview Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER FLOW                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  1. User visits /donate                                              â”‚
â”‚     â†“                                                                 â”‚
â”‚  2. Frontend fetches active foundations from API                     â”‚
â”‚     â†“                                                                 â”‚
â”‚  3. Displays foundation cards (VSF, CF, ABC, etc.)                   â”‚
â”‚     â†“                                                                 â”‚
â”‚  4. User selects foundation & amount                                 â”‚
â”‚     â†“                                                                 â”‚
â”‚  5. Creates donation with Foundation ObjectId                        â”‚
â”‚     â†“                                                                 â”‚
â”‚  6. Foundation stats auto-update                                     â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ADMIN FLOW                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  1. Admin logs in: /admin/login                                      â”‚
â”‚     â†“                                                                 â”‚
â”‚  2. Goes to Foundation Settings tab                                  â”‚
â”‚     â†“                                                                 â”‚
â”‚  3. Scrolls to "Foundation Management" section                       â”‚
â”‚     â†“                                                                 â”‚
â”‚  4. Clicks "+ Add Foundation"                                        â”‚
â”‚     â†“                                                                 â”‚
â”‚  5. Fills form (name, %, optional: logo, color, etc.)               â”‚
â”‚     â†“                                                                 â”‚
â”‚  6. Clicks "Create Foundation"                                       â”‚
â”‚     â†“                                                                 â”‚
â”‚  7. POST /api/admin/foundations                                      â”‚
â”‚     â†“                                                                 â”‚
â”‚  8. Foundation saved to MongoDB                                      â”‚
â”‚     â†“                                                                 â”‚
â”‚  9. Admin clicks "Activate" button                                   â”‚
â”‚     â†“                                                                 â”‚
â”‚  10. PATCH /api/admin/foundations/:id { isActive: true }            â”‚
â”‚     â†“                                                                 â”‚
â”‚  11. Foundation now visible on /donate page                          â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ Database Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MongoDB Collections                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚   FOUNDATIONS   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚    DONATIONS     â”‚                  â”‚
â”‚  â”‚                 â”‚         â”‚                  â”‚                  â”‚
â”‚  â”‚ _id: ObjectId   â”‚         â”‚ foundation:      â”‚                  â”‚
â”‚  â”‚ name: String    â”‚         â”‚   ObjectId       â”‚ â† References     â”‚
â”‚  â”‚ code: String    â”‚         â”‚   (or "vsf"/"cf")â”‚   Foundation     â”‚
â”‚  â”‚ foundationShare â”‚         â”‚                  â”‚                  â”‚
â”‚  â”‚ companyShare    â”‚         â”‚ amount: Number   â”‚                  â”‚
â”‚  â”‚ isActive: Bool  â”‚         â”‚ donorName: Str   â”‚                  â”‚
â”‚  â”‚ priority: Int   â”‚         â”‚ status: String   â”‚                  â”‚
â”‚  â”‚ stats: Object   â”‚         â”‚ ...              â”‚                  â”‚
â”‚  â”‚ ...             â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚         â”‚                                                            â”‚
â”‚         â”‚ On donation complete:                                     â”‚
â”‚         â”‚ Foundation.stats.totalDonations++                         â”‚
â”‚         â”‚ Foundation.stats.totalAmount += amount                    â”‚
â”‚         â”‚ Foundation.stats.donorCount++ (if new donor)             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Migration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BEFORE MIGRATION (Hardcoded System)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Code:                              Database:                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ foundationConfigâ”‚               â”‚ Donation         â”‚            â”‚
â”‚  â”‚ {               â”‚               â”‚ {                â”‚            â”‚
â”‚  â”‚   vsf: {...},   â”‚               â”‚   foundation:    â”‚            â”‚
â”‚  â”‚   cf: {...}     â”‚               â”‚     "vsf" â—„â”€â”€â”€â”€â”€â”€â”¼â”€â”€ String  â”‚
â”‚  â”‚ }               â”‚               â”‚ }                â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â–²                                                            â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â”€â”€ Hardcoded in code files                                â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â¬‡â¬‡â¬‡
                        RUN MIGRATION SCRIPT
                              â¬‡â¬‡â¬‡

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           AFTER MIGRATION (Dynamic System)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Database:                          Database:                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Foundation      â”‚               â”‚ Donation         â”‚            â”‚
â”‚  â”‚ {               â”‚               â”‚ {                â”‚            â”‚
â”‚  â”‚   _id: ObjectId,â”‚               â”‚   foundation:    â”‚            â”‚
â”‚  â”‚   code: "vsf",  â”‚               â”‚     ObjectId â—„â”€â”€â”€â”¼â”€â”€ Migrated â”‚
â”‚  â”‚   name: "VSF",  â”‚               â”‚ }                â”‚            â”‚
â”‚  â”‚   stats: {...}  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚  â”‚ }               â”‚                                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                â”‚
â”‚         â–²                                                            â”‚
â”‚         â”‚                                                            â”‚
â”‚         â””â”€â”€â”€ Stored in database, editable from admin panel          â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ Admin Panel UI Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Foundation Settings Tab                              [Refresh]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Section 1: Legacy Percentage Config (VSF & CF only)           â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  ğŸ’š VSF                                                        â”‚ â”‚
â”‚  â”‚  Platform Fee: [12]%                                           â”‚ â”‚
â”‚  â”‚  Foundation Share: [65]%                                       â”‚ â”‚
â”‚  â”‚  Example: â‚¹1000 â†’ Platform: â‚¹120, Foundation: â‚¹572...         â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  ğŸ’œ CF                                                         â”‚ â”‚
â”‚  â”‚  Platform Fee: [8]%                                            â”‚ â”‚
â”‚  â”‚  Foundation Share: [75]%                                       â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ DIVIDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Section 2: Dynamic Foundation Management [+ Add Foundation]   â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ [Expandable Form - Only shows when "+ Add" clicked]      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Foundation Name: [________________] *Required              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Code: [________] (auto-generated if empty)                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Foundation Share %: [65]% *Required                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Company Share %: [35]% (auto-calculated)                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Display Name: [____]                                      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Tagline: [_______________________________]                â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Description: [_____________________________]              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚              [_____________________________]              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Icon: â¤ï¸ ğŸ’š ğŸ’œ ğŸ§¡ ğŸ’™ ğŸ’› ğŸ¤ ğŸ–¤ ğŸ’– ğŸ’—                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Color: [ğŸ¨] [#10b981]                                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Logo: [ğŸ“ Upload Logo] or use icon above                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Contact Email: [________________]                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Contact Phone: [________________]                         â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Website: [________________]                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ Minimum Donation: [1] â‚¹                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [âœ“] Active (show on donation page)                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ [ğŸ’¾ Save] [âœ• Cancel]                                     â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Foundation List:                                          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ’š  Vishnu Shakti Foundation (vsf)    âœ… Active   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Empowering visually impaired individuals       â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Total: 45  |  â‚¹67,455  |  Donors: 38          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Foundation: 65% | Company: 35% | Priority: 1   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     [âš¡ Deactivate] [âœï¸ Edit] [ğŸ—‘ï¸ Delete]          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ’œ  Chetana Foundation (cf)           âœ… Active   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Supporting accessibility initiatives            â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Total: 32  |  â‚¹48,000  |  Donors: 29          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Foundation: 75% | Company: 25% | Priority: 2   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     [âš¡ Deactivate] [âœï¸ Edit] [ğŸ—‘ï¸ Delete]          â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ ğŸ§¡  ABC Children Trust (abc)          âŒ Inactive â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Helping underprivileged children                â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Total: 0  |  â‚¹0  |  Donors: 0                  â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     Foundation: 70% | Company: 30% | Priority: 3   â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                     â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     [âœ… Activate] [âœï¸ Edit] [ğŸ—‘ï¸ Delete]            â”‚  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                            â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â„¹ï¸ Info Box:                                                  â”‚ â”‚
â”‚  â”‚  â€¢ Only active foundations appear on donation page             â”‚ â”‚
â”‚  â”‚  â€¢ Foundation Share % = portion foundation receives            â”‚ â”‚
â”‚  â”‚  â€¢ Company Share % = remaining portion (auto-calculated)       â”‚ â”‚
â”‚  â”‚  â€¢ Priority determines display order (lower = first)           â”‚ â”‚
â”‚  â”‚  â€¢ Foundations with donations cannot be deleted                â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Donation Page Display

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Donate to MACEAZY                                     [Home] [Cart] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  Select Amount:                                                      â”‚
â”‚  [â‚¹500] [â‚¹1000] [â‚¹2000] [â‚¹5000] [Custom: ____]                    â”‚
â”‚                                                                      â”‚
â”‚  Donor Details:                                                      â”‚
â”‚  Name: [_________________]                                           â”‚
â”‚  Email: [_________________]                                          â”‚
â”‚  Phone: [_________________]                                          â”‚
â”‚                                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                                      â”‚
â”‚  Select Foundation:                                                  â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚      ğŸ’š        â”‚  â”‚      ğŸ’œ        â”‚  â”‚      ğŸ§¡        â”‚       â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚      VSF       â”‚  â”‚      CF        â”‚  â”‚      ABC       â”‚       â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚  Vishnu Shakti â”‚  â”‚    Chetana     â”‚  â”‚  ABC Children  â”‚       â”‚
â”‚  â”‚   Foundation   â”‚  â”‚   Foundation   â”‚  â”‚     Trust      â”‚       â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚  Empowering    â”‚  â”‚  Supporting    â”‚  â”‚    Helping     â”‚       â”‚
â”‚  â”‚    visually    â”‚  â”‚ accessibility  â”‚  â”‚ underprivilegedâ”‚       â”‚
â”‚  â”‚   impaired     â”‚  â”‚  initiatives   â”‚  â”‚    children    â”‚       â”‚
â”‚  â”‚  individuals   â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                â”‚       â”‚
â”‚  â”‚ [Donate VSF]   â”‚  â”‚ [Donate CF]    â”‚  â”‚ [Donate ABC]   â”‚       â”‚
â”‚  â”‚   Priority: 1  â”‚  â”‚   Priority: 2  â”‚  â”‚   Priority: 3  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â–²                    â–²                    â–²                 â”‚
â”‚         â”‚                    â”‚                    â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                  Fetched dynamically from database                   â”‚
â”‚                  (Only shows active foundations)                     â”‚
â”‚                                                                      â”‚
â”‚  â„¹ï¸ Selected: VSF - Your donation helps empower visually impaired  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ API Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API ENDPOINTS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  ADMIN APIs (Require admin JWT):                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  GET  /api/admin/foundations                                   â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  Fetch all foundations with stats                              â”‚ â”‚
â”‚  â”‚  Response: { foundations: [...], count: 3 }                    â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  POST /api/admin/foundations                                   â”‚ â”‚
â”‚  â”‚  Body: { foundationName, foundationSharePercent, ... }         â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  1. Validate required fields                                   â”‚ â”‚
â”‚  â”‚  2. Auto-generate code if empty                                â”‚ â”‚
â”‚  â”‚  3. Check code uniqueness                                      â”‚ â”‚
â”‚  â”‚  4. Auto-calculate company share                               â”‚ â”‚
â”‚  â”‚  5. Get next priority number                                   â”‚ â”‚
â”‚  â”‚  6. Create foundation in MongoDB                               â”‚ â”‚
â”‚  â”‚  7. Return created foundation                                  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  GET  /api/admin/foundations/:id                               â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  Fetch single foundation by ObjectId                           â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  PATCH /api/admin/foundations/:id                              â”‚ â”‚
â”‚  â”‚  Body: { foundationSharePercent: 80, isActive: true, ... }    â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  1. Find foundation by ID                                      â”‚ â”‚
â”‚  â”‚  2. Update provided fields                                     â”‚ â”‚
â”‚  â”‚  3. Check code uniqueness if changed                           â”‚ â”‚
â”‚  â”‚  4. Validate percentages sum to 100                            â”‚ â”‚
â”‚  â”‚  5. Save to MongoDB                                            â”‚ â”‚
â”‚  â”‚  6. Return updated foundation                                  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  DELETE /api/admin/foundations/:id                             â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  1. Check if foundation has donations                          â”‚ â”‚
â”‚  â”‚  2. If donations exist â†’ Error 400                             â”‚ â”‚
â”‚  â”‚  3. If no donations â†’ Delete foundation                        â”‚ â”‚
â”‚  â”‚  4. Return success message                                     â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  PUBLIC APIs (No auth required):                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚  GET  /api/foundations/active                                  â”‚ â”‚
â”‚  â”‚  â†“                                                              â”‚ â”‚
â”‚  â”‚  Fetch all active foundations sorted by priority               â”‚ â”‚
â”‚  â”‚  Used by: Donation page to display foundation cards            â”‚ â”‚
â”‚  â”‚  Response: { foundations: [...] }                              â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Data Flow on Donation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             DONATION CREATION FLOW                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  1. User clicks "Donate â‚¹1000 - VSF"                                â”‚
â”‚     â†“                                                                 â”‚
â”‚  2. POST /api/donate/create                                          â”‚
â”‚     Body: {                                                           â”‚
â”‚       amount: 1000,                                                   â”‚
â”‚       foundation: "507f1f77bcf86cd799439011" (VSF ObjectId)         â”‚
â”‚     }                                                                 â”‚
â”‚     â†“                                                                 â”‚
â”‚  3. Backend fetches Foundation by ObjectId                           â”‚
â”‚     â†“                                                                 â”‚
â”‚  4. Calculate breakdown:                                             â”‚
â”‚     Foundation Share: 65% of â‚¹1000 = â‚¹650                          â”‚
â”‚     Company Share: 35% of â‚¹1000 = â‚¹350                             â”‚
â”‚     â†“                                                                 â”‚
â”‚  5. Create Razorpay order for â‚¹1000                                 â”‚
â”‚     â†“                                                                 â”‚
â”‚  6. Create Donation document:                                        â”‚
â”‚     {                                                                 â”‚
â”‚       foundation: ObjectId("507f1f77bcf86cd799439011"),             â”‚
â”‚       amount: 1000,                                                   â”‚
â”‚       foundationAmount: 650,                                          â”‚
â”‚       companyAmount: 350,                                             â”‚
â”‚       status: "pending"                                               â”‚
â”‚     }                                                                 â”‚
â”‚     â†“                                                                 â”‚
â”‚  7. Return Razorpay order details to frontend                        â”‚
â”‚     â†“                                                                 â”‚
â”‚  8. User completes payment                                           â”‚
â”‚     â†“                                                                 â”‚
â”‚  9. POST /api/donate/verify                                          â”‚
â”‚     â†“                                                                 â”‚
â”‚  10. Update donation status: "completed"                             â”‚
â”‚     â†“                                                                 â”‚
â”‚  11. Update Foundation stats:                                        â”‚
â”‚      Foundation.stats.totalDonations++ (46)                          â”‚
â”‚      Foundation.stats.totalAmount += 1000 (â‚¹68,455)                 â”‚
â”‚      Foundation.stats.donorCount++ (39 if new donor)                â”‚
â”‚     â†“                                                                 â”‚
â”‚  12. Send thank you email                                            â”‚
â”‚     â†“                                                                 â”‚
â”‚  13. Redirect to success page                                        â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ADMIN AUTHENTICATION                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  1. Admin tries to access /api/admin/foundations                    â”‚
â”‚     â†“                                                                 â”‚
â”‚  2. Middleware: getAdminFromRequest(request)                         â”‚
â”‚     â†“                                                                 â”‚
â”‚  3. Extract "admin-token" cookie                                     â”‚
â”‚     â†“                                                                 â”‚
â”‚  4. Verify JWT token                                                 â”‚
â”‚     â”œâ”€â”€ Valid â†’ Extract admin data â†’ Continue                        â”‚
â”‚     â””â”€â”€ Invalid â†’ Return 401 Unauthorized                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Example:                                                        â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚ const adminData = getAdminFromRequest(request);                â”‚ â”‚
â”‚  â”‚ if (!adminData) {                                              â”‚ â”‚
â”‚  â”‚   return NextResponse.json(                                    â”‚ â”‚
â”‚  â”‚     { error: "Unauthorized" },                                 â”‚ â”‚
â”‚  â”‚     { status: 401 }                                            â”‚ â”‚
â”‚  â”‚   );                                                            â”‚ â”‚
â”‚  â”‚ }                                                               â”‚ â”‚
â”‚  â”‚                                                                 â”‚ â”‚
â”‚  â”‚ // Admin verified, continue with API logic                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Stats Calculation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FOUNDATION STATISTICS AUTO-CALCULATION                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  Triggered on: Donation status changes to "completed"               â”‚
â”‚                                                                       â”‚
â”‚  MongoDB Aggregation:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Donation.aggregate([                                           â”‚ â”‚
â”‚  â”‚   {                                                             â”‚ â”‚
â”‚  â”‚     $match: {                                                   â”‚ â”‚
â”‚  â”‚       foundation: ObjectId("507f..."),                         â”‚ â”‚
â”‚  â”‚       status: "completed"                                       â”‚ â”‚
â”‚  â”‚     }                                                            â”‚ â”‚
â”‚  â”‚   },                                                            â”‚ â”‚
â”‚  â”‚   {                                                             â”‚ â”‚
â”‚  â”‚     $group: {                                                   â”‚ â”‚
â”‚  â”‚       _id: null,                                                â”‚ â”‚
â”‚  â”‚       totalDonations: { $sum: 1 },                             â”‚ â”‚
â”‚  â”‚       totalAmount: { $sum: "$amount" },                        â”‚ â”‚
â”‚  â”‚       uniqueDonors: { $addToSet: "$email" }                    â”‚ â”‚
â”‚  â”‚     }                                                            â”‚ â”‚
â”‚  â”‚   }                                                             â”‚ â”‚
â”‚  â”‚ ]);                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  Result:                                                             â”‚
â”‚  {                                                                   â”‚
â”‚    totalDonations: 46,                                               â”‚
â”‚    totalAmount: 68455,                                               â”‚
â”‚    uniqueDonors: ["donor1@email.com", "donor2@email.com", ...]     â”‚
â”‚  }                                                                   â”‚
â”‚                                                                       â”‚
â”‚  Update Foundation:                                                  â”‚
â”‚  Foundation.updateOne(                                               â”‚
â”‚    { _id: ObjectId("507f...") },                                    â”‚
â”‚    {                                                                 â”‚
â”‚      $set: {                                                         â”‚
â”‚        "stats.totalDonations": 46,                                   â”‚
â”‚        "stats.totalAmount": 68455,                                   â”‚
â”‚        "stats.donorCount": uniqueDonors.length                      â”‚
â”‚      }                                                               â”‚
â”‚    }                                                                 â”‚
â”‚  );                                                                  â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Benefits Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BEFORE vs AFTER                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  BEFORE (Hardcoded):                    AFTER (Dynamic):            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Want to add NGO?     â”‚              â”‚ Want to add NGO?     â”‚    â”‚
â”‚  â”‚                      â”‚              â”‚                      â”‚    â”‚
â”‚  â”‚ 1. Edit code files   â”‚              â”‚ 1. Login to admin    â”‚    â”‚
â”‚  â”‚ 2. Update models     â”‚              â”‚ 2. Click "Add"       â”‚    â”‚
â”‚  â”‚ 3. Modify frontend   â”‚              â”‚ 3. Fill 2 fields     â”‚    â”‚
â”‚  â”‚ 4. Update APIs       â”‚              â”‚ 4. Click "Activate"  â”‚    â”‚
â”‚  â”‚ 5. Test thoroughly   â”‚              â”‚ 5. Done! âœ…          â”‚    â”‚
â”‚  â”‚ 6. Deploy code       â”‚              â”‚                      â”‚    â”‚
â”‚  â”‚                      â”‚              â”‚ Time: 2 minutes      â”‚    â”‚
â”‚  â”‚ Time: 2-3 hours      â”‚              â”‚ Code changes: 0      â”‚    â”‚
â”‚  â”‚ Risk: High           â”‚              â”‚ Risk: None           â”‚    â”‚
â”‚  â”‚ Developer needed: âœ… â”‚              â”‚ Developer needed: âŒ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Created:** October 20, 2025
**Purpose:** Visual reference for Dynamic Foundation System
**Total Diagrams:** 11
